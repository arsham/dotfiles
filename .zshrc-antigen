# Known issues:
# Some completions (like golang) doesn't work

DOTFILES=~/dotfiles
GENCOMPL_FPATH=$DOTFILES/completions
DISABLE_UPDATE_PROMPT=true
DISABLE_AUTO_UPDATE=true
HISTFILE=/home/arsham/Dropbox/Home/.zsh_history
HISTSIZE=999999999
SAVEHIST=$HISTSIZE
LANG=en_GB.UTF-8
LC_CTYPE=en_GB.UTF8
EDITOR=nano
VISUAL=nano

. $DOTFILES/zsh_conf/powerlevel9k.zsh-theme
fpath=($DOTFILES/functions "${fpath[@]}")

source ~/antigen/bin/antigen.zsh
antigen use oh-my-zsh

antigen bundles <<EOBUNDLES

    command-not-found
    ssh-agent
    colored-man-pages
    zdharma/fast-syntax-highlighting
    tarruda/zsh-autosuggestions
    zsh-users/zsh-completions
    RobSis/zsh-completion-generator
    emoji
    golang

EOBUNDLES
antigen theme bhilburn/powerlevel9k powerlevel9k

# Tell Antigen that you're done.
antigen apply

[ -f ~/.zshrc-local ] && source ~/.zshrc-local
[ -f $DOTFILES/.zaliases ] && source $DOTFILES/.zaliases

. $DOTFILES/zsh_conf/fzf

if [[ -d $DOTFILES/functions ]]; then
   for func in $(find $DOTFILES/functions -type f -exec realpath {} +); do
      unhash -f $func 2>/dev/null
      autoload +X $func 2>/dev/null
   done
fi

if [[ -d $DOTFILES/widgets ]]; then
   for func in $(find $DOTFILES/widgets -type f -exec realpath {} +); do
      source $func
   done
fi
setopt share_history
