#compdef tmuxinator mux

_tmuxinator() {
  local commands projects
  commands=(${(f)"$(tmuxinator commands zsh)"})
  projects=(${(f)"$(tmuxinator completions start)"})


  if (( CURRENT == 2 )); then
    _describe -t commands 'commands' commands
  elif (( CURRENT == 3 )); then
    case $words[2] in
      copy|delete|open|start|stop|edit|implode|doctor)
        _arguments '*:projects:($projects)'
        ;;
      list)
        _arguments '-v[verbose]' # FIXME: doesn't work well
        ;;
    esac
  fi

  return 0
}

_tmuxinator

# vim: ft=zsh sw=2 ts=2 et
