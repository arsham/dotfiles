# Known issues:
# Installing binaries (like fzf) from plugins is not supported.

source <(antibody init)

DOTFILES=~/dotfiles
# zsh-completion-generator folder
GENCOMPL_FPATH=$DOTFILES/completions
HISTFILE=/home/arsham/Dropbox/Home/.zsh_history

fpath=($GENCOMPL_FPATH $DOTFILES/functions "${fpath[@]}")
. $DOTFILES/zsh_conf/powerlevel9k.zsh-theme

# fix for oh-my-zsh tweaks that let's installing some plugins
ZSH="${HOME}/.cache/antibody/https-COLON--SLASH--SLASH-github.com-SLASH-robbyrussell-SLASH-oh-my-zsh"
DISABLE_AUTO_UPDATE=true

antibody bundle robbyrussell/oh-my-zsh
antibody bundle tarruda/zsh-autosuggestions
antibody bundle zdharma/fast-syntax-highlighting
antibody bundle bhilburn/powerlevel9k
antibody bundle sorin-ionescu/prezto folder:modules/ssh
antibody bundle zsh-users/zsh-completions
antibody bundle robbyrussell/oh-my-zsh folder:plugins/history-substring-search
antibody bundle robbyrussell/oh-my-zsh folder:plugins/command-not-found
antibody bundle robbyrussell/oh-my-zsh folder:plugins/emoji
antibody bundle robbyrussell/oh-my-zsh folder:plugins/golang
antibody bundle robbyrussell/oh-my-zsh folder:plugins/colored-man-pages
antibody bundle RobSis/zsh-completion-generator

[ -f ~/.zshrc-local ] && source ~/.zshrc-local
[ -f $DOTFILES/.zaliases ] && source $DOTFILES/.zaliases

. $DOTFILES/zsh_conf/fzf

# history search
bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down

zstyle ':prezto:module:autosuggestions' color 'yes'

if [[ -d $DOTFILES/functions ]]; then
   for func in $(find $DOTFILES/functions -type f -exec realpath {} +); do
      unhash -f $func 2>/dev/null
      autoload +X $func
   done
fi

if [[ -d $DOTFILES/widgets ]]; then
   for func in $(find $DOTFILES/widgets -type f -exec realpath {} +); do
      source $func
   done
fi

HISTSIZE=999999999
SAVEHIST=$HISTSIZE
LANG=en_GB.UTF-8
LC_CTYPE=en_GB.UTF8
EDITOR=nano
VISUAL=nano

setopt share_history
